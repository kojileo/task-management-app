# タスク管理アプリケーションのE2Eテスト

このディレクトリには、タスク管理アプリケーションのE2Eテストが含まれています。
テストはPlaywrightを使用して実装されています。

## テストファイル

現在、以下のテストファイルが実装されています：

- `task-management.spec.ts` - タスク管理の基本機能（作成、編集、削除、ステータス変更）をテスト
- `accessibility.spec.ts` - アクセシビリティに関するテスト（キーボード操作、ARIA属性、レスポンシブデザイン）

注：当初は認証機能やタスク共有機能のテストファイルも含まれていましたが、実際のUI実装に合わせて削除されました。

## テスト実行方法

テストを実行するには、以下の手順に従ってください：

1. バックエンドサーバーを起動：
   ```
   cd backend
   npm run dev
   ```

2. フロントエンドサーバーを起動：
   ```
   cd frontend
   npm run dev
   ```

3. 別のターミナルでE2Eテストを実行：
   ```
   cd e2e
   npx playwright test
   ```

または、提供されている実行スクリプトを使用することもできます：

- Windows PowerShell: `./run-tests.ps1`
- Windows コマンドプロンプト: `run-tests.bat`

## テスト内容

### タスク管理基本機能 (`task-management.spec.ts`)

このテストファイルでは、タスク管理アプリケーションの基本的な機能をテストします：

1. タスクの作成と管理基本フロー
   - タスクの作成
   - タスクの編集
   - ステータス変更
   - タスクの削除

2. タスク作成時のバリデーション
   - 必須フィールドの検証

3. 複数タスクの整理とステータス変更
   - 複数タスクの作成
   - ステータス変更によるカラム移動の確認

### アクセシビリティテスト (`accessibility.spec.ts`)

このテストファイルでは、アプリケーションのアクセシビリティをテストします：

1. キーボードによるタスク作成とフォーム操作
   - キーボードナビゲーション
   - フォーカス管理

2. アクセシブルなARIA属性の検証
   - ラベルとフォーム要素の関連付け
   - ボタンのaria-label属性

3. レスポンシブデザインの確認
   - モバイル、タブレット、デスクトップでのレイアウト変更

## 既知の問題と解決策

1. 文字化けの問題
   - 実行スクリプトでは、エンコーディングをUTF-8に設定しています
   - PowerShellスクリプト: `[Console]::OutputEncoding = [System.Text.Encoding]::UTF8`
   - バッチファイル: `chcp 65001 > nul`

2. セレクターの問題
   - テストでは、実際のUI実装に合わせてセレクターを調整しています
   - 例：カラムの検出には正規表現パターン `/^未着手/` を使用

3. タイミングの問題
   - トースト通知が表示されるのを待つための待機処理を追加
   - ページロード時の待機処理を改善 